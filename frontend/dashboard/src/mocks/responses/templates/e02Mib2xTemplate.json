{
  "name": "e02-mib2x",
  "maintainer": "imaging-e02-group",
  "title": "ePSIC mib conversion",
  "description": "Convert MIB file to hdf5/hspy files\n",
  "arguments": {
    "properties": {
      "DEBUG": {
        "default": 1,
        "type": "integer"
      },
      "Scan_X": {
        "default": 256,
        "minimum": 0,
        "type": "integer"
      },
      "Scan_Y": {
        "default": 256,
        "minimum": 0,
        "type": "integer"
      },
      "bin_nav_factor": {
        "default": 4,
        "maximum": 8,
        "minimum": 0,
        "type": "integer"
      },
      "bin_sig_factor": {
        "default": 4,
        "maximum": 8,
        "minimum": 0,
        "type": "integer"
      },
      "create_json": {
        "default": false,
        "type": "boolean"
      },
      "iBF": {
        "default": true,
        "type": "boolean"
      },
      "memory": {
        "default": "16Gi",
        "pattern": "^[0-9]+[GMK]i$",
        "type": "string"
      },
      "mib_path": {
        "type": "string"
      },
      "nprocs": {
        "default": 8,
        "minimum": 0,
        "type": "integer"
      },
      "ptycho_config": {
        "default": "",
        "type": "string"
      },
      "ptycho_template": {
        "default": "",
        "type": "string"
      },
      "reshape_option": {
        "default": "--auto-reshape",
        "oneOf": [
          {
            "const": "--auto-reshape",
            "title": "Auto"
          },
          {
            "const": "--no-reshaping",
            "title": "None"
          },
          {
            "const": "--use-fly-back",
            "title": "Fly-back"
          },
          {
            "const": "--known-shape",
            "title": "By known shape"
          }
        ],
        "type": "string"
      }
    },
    "required": [
      "DEBUG",
      "Scan_X",
      "Scan_Y",
      "bin_nav_factor",
      "bin_sig_factor",
      "create_json",
      "iBF",
      "memory",
      "mib_path",
      "nprocs",
      "ptycho_config",
      "ptycho_template",
      "reshape_option"
    ],
    "type": "object"
  },
  "uiSchema": {
    "type": "VerticalLayout",
    "elements": [
      {
        "type": "Group",
        "label": "Input Files",
        "elements": [
          {
            "type": "HorizontalLayout",
            "elements": [
              {
                "type": "Control",
                "scope": "#/properties/mib_path",
                "label": "Path of MIB file",
                "options": null,
                "rule": null
              },
              {
                "type": "Control",
                "scope": "#/properties/iBF",
                "label": "Generate integrated bright-field image",
                "options": null,
                "rule": null
              }
            ],
            "options": null,
            "rule": null
          }
        ],
        "options": null,
        "rule": null
      },
      {
        "type": "VerticalLayout",
        "elements": [
          {
            "type": "HorizontalLayout",
            "elements": [
              {
                "type": "Group",
                "label": "Reshape Options",
                "elements": [
                  {
                    "type": "Control",
                    "scope": "#/properties/reshape_option",
                    "label": "Reshape methods",
                    "options": null,
                    "rule": null
                  },
                  {
                    "type": "Control",
                    "scope": "#/properties/Scan_X",
                    "label": "Dimension in x (row)",
                    "options": null,
                    "rule": null
                  },
                  {
                    "type": "Control",
                    "scope": "#/properties/Scan_Y",
                    "label": "Dimension in y (column)",
                    "options": null,
                    "rule": null
                  }
                ],
                "options": null,
                "rule": null
              },
              {
                "type": "Group",
                "label": "Pixel Binning",
                "elements": [
                  {
                    "type": "Control",
                    "scope": "#/properties/bin_sig_factor",
                    "label": "Signal binning factor (detector)",
                    "options": null,
                    "rule": null
                  },
                  {
                    "type": "Control",
                    "scope": "#/properties/bin_nav_factor",
                    "label": "Navigation binning factor",
                    "options": null,
                    "rule": null
                  }
                ],
                "options": null,
                "rule": null
              }
            ],
            "options": null,
            "rule": null
          },
          {
            "type": "HorizontalLayout",
            "elements": [
              {
                "type": "Group",
                "label": "Configs for PtyREX",
                "elements": [
                  {
                    "type": "Control",
                    "scope": "#/properties/create_json",
                    "label": "Create PtyREX config",
                    "options": null,
                    "rule": null
                  },
                  {
                    "type": "Control",
                    "scope": "#/properties/ptycho_config",
                    "label": "The name of the generated config",
                    "options": null,
                    "rule": {
                      "condition": {
                        "schema": {
                          "const": false
                        },
                        "scope": "#/properties/create_json"
                      },
                      "effect": "HIDE"
                    }
                  },
                  {
                    "type": "Control",
                    "scope": "#/properties/ptycho_template",
                    "label": "Path of the PtyREX template config",
                    "options": null,
                    "rule": {
                      "condition": {
                        "schema": {
                          "const": false
                        },
                        "scope": "#/properties/create_json"
                      },
                      "effect": "HIDE"
                    }
                  }
                ],
                "options": null,
                "rule": null
              },
              {
                "type": "Group",
                "label": "Resource and Debug Settings",
                "elements": [
                  {
                    "type": "Control",
                    "scope": "#/properties/nprocs",
                    "options": null,
                    "rule": null
                  },
                  {
                    "type": "Control",
                    "scope": "#/properties/memory",
                    "options": null,
                    "rule": null
                  },
                  {
                    "type": "Control",
                    "scope": "#/properties/DEBUG",
                    "options": null,
                    "rule": null
                  }
                ],
                "options": null,
                "rule": null
              }
            ],
            "options": null,
            "rule": null
          }
        ],
        "options": null,
        "rule": null
      }
    ],
    "options": {
      "formWidth": "80%"
    },
    "rule": null
  },
  "repository": null,
  "templateSource": {
    "repositoryUrl": "https://github.com/DiamondLightSource/imaging-workflows",
    "path": "e02",
    "targetRevision": "HEAD"
  }
}
