configuration:
  keycloakUrl: https://authn.diamond.ac.uk
  keycloakRealm: master
  keycloakClient: workflows-dashboard
  graphUrl: https://workflows.diamond.ac.uk/graphql
  graphWsUrl: wss://workflows.diamond.ac.uk/graphql/ws
  sourceDir: "/usr/share/nginx/html"

image:
  registry: ghcr.io
  repository: diamondlightsource/workflows-dashboard
  tag: ""
  digest: ""
  pullPolicy: IfNotPresent
  pullSecrets: []

deployment:
  replicas: 1
  annotations: []
  podAnnotations: []
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  nodeSelector: {}
  affinity: {}
  tolerations: []

service:
  create: true
  annotations: []
  type: ClusterIP
  port: 80

ingress:
  create: true
  className: nginx
  hosts:
    - host: workflows.diamond.ac.uk
      paths:
        - path: /
          pathType: Prefix
          service:
            name: dashboard
            port: 80
        - path: /api
          pathType: Prefix
          service:
            name: oidc-bff
            port: 80
        - path: /auth
          pathType: Prefix
          service:
            name: oidc-bff
            port: 80
  tls: false
  annotations:
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/hsts: "true"
    nginx.ingress.kubernetes.io/hsts-max-age: "86400"

serviceAccount:
  create: true
  name: ""
  annotations: []

oidcBff:
  image:
    registry: ghcr.io
    repository: diamondlightsource/workflows-oidc-bff
    tag: "davehadley"
    digest: "sha256:b58a8063f66c88e5979fdab812d27e5c1b50ecd784f6faa9dc94b4d5ffbda6a0"
    pullPolicy: IfNotPresent
    pullSecrets: []
  configuration:
    clientId: "workflows-ui-dev"
    clientSecret: ""
    port: "5173"
    oidcProviderUrl: "https://authn.diamond.ac.uk/realms/master"
    postgres:
      userNameSecret:
        name: postgres-argo-workflows-password
        key: username
      passwordSecret:
        name: postgres-argo-workflows-password
        key: password
      database: "auth_service"
      hostname: "workflows-postgresql-ha-pgpool"
      port: "5432"
    encryption:
      publicKeySecret:
        name: token-encryption-public-key
        key: key
      privateKeySecret:
        name: token-encryption-private-key
        key: key