vcluster:
  telemetry:
    enabled: false
  controlPlane:
    distro:
      k0s:
        enabled: true
    coredns:
      deployment:
        replicas: 3
        resources:
          requests:
            cpu: 100m
    statefulSet:
      highAvailability:
        replicas: 3
      persistence:
        volumeClaim:
          storageClass: db-nvme-storage
  networking:
    replicateServices:
      toHost:
        - from: workflows/workflows-argo-workflows-server
          to: argo-workflows-server
  experimental:
    deploy:
      helm:
        - chart:
            name: sealed-secrets
            version: 2.15.3
            repo: https://bitnami-labs.github.io/sealed-secrets
          release:
            name: sealed-secrets
            namespace: kube-system
          values: |-
            fullnameOverride: sealed-secrets-controller
        - chart:
            name: workflows
            version: 0.1.0
            repo: oci://ghcr.io/diamondlightsource
          release:
            name: workflows
            namespace: workflows

ingress:
  enabled: true
  host: workflows.diamond.ac.uk
  path: /
  service:
    name: argo-workflows-server
    port: 2746
