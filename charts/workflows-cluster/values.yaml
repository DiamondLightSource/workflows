vcluster:
  telemetry:
    enabled: false
  controlPlane:
    distro:
      k0s:
        enabled: true
    coredns:
      deployment:
        resources:
          requests:
            cpu: 100m
  networking:
    replicateServices:
      toHost:
        - from: workflows/workflows-argo-workflows-server
          to: argo-workflows-server
  experimental:
    deploy:
      manifests: |-
        apiVersion: v1
        kind: Namespace
        metadata:
          name: workflows
          labels:
            name: workflows
      helm:
        - chart:
            name: sealed-secrets
            version: 2.15.0
            repo: https://bitnami-labs.github.io/sealed-secrets
          release:
            name: sealed-secrets
            namespace: kube-system
          values: |-
            fullnameOverride: sealed-secrets-controller
        - chart:
            name: workflows
            version: 0.1.0
            repo: oci://ghcr.io/diamondlightsource
          release:
            name: workflows
            namespace: workflows

ingress:
  host: workflows.diamond.ac.uk
  path: /
  service:
    name: argo-workflows-server
    port: 2746
