argocd:
  enabled: true
  targetRevision: staging-merge
  extraValueFiles:
    - staging-values.yaml

events:
  enabled: false
  extraValueFiles:
    - staging-values.yaml

groups:
  enabled: true
  targetRevision: staging-merge

# kyverno:
#   enabled: true
#   valuesObject:
#     admissionController:
#       replicas: 1
#       container:
#         resources:
#           limits:
#             cpu: 200m
#             memory: 2Gi
#           requests:
#             cpu: 100m
#             memory: 1Gi
#     backgroundController:
#       replicas: 1
#       resources:
#         limits:
#           cpu: 200m
#           memory: 2Gi
#         requests:
#           cpu: 100m
#           memory: 1Gi

# make staging match production exactly
kyverno:
  enabled: true
  targetRevision: 3.2.6
  extraValuesFiles: []
  valuesObject:
    features:
      dumpPayload:
        enabled: true
    admissionController:
      metricsService:
        enabled: true
      metering:
        collector: "otel-collector-opentelemetry-collector.monitoring.svc.cluster.local"
        port: 4317
        config: "grpc"
      replicas: 1
      container:
        resources:
          limits:
            cpu: 6
            memory: 12Gi
          requests:
            cpu: 5
            memory: 8Gi
    backgroundController:
      extraArgs:
        genWorkers: 50
        clientRateLimitBurst: 500
        clientRateLimitQPS: 500
      replicas: 1
      resources:
        limits:
          cpu: 8
          memory: 32Gi
        requests:
          cpu: 6
          memory: 16Gi
    cleanupController:
      enabled: false
    reportsController:
      enabled: true

sessionspaces:
  enabled: false
  targetRevision: staging-merge
  extraValueFiles:
    - staging-values.yaml

sealedsecrets:
  enabled: true
  valuesObject:
    resources:
      limits:
        cpu: 200m
        memory: 512Mi
      requests:
        cpu: 100m
        memory: 256Mi

workflows:
  enabled: true
  targetRevision: staging-merge
  extraValueFiles:
    - staging-values.yaml

graphProxy:
  enabled: true
  targetRevision: staging-merge
  extraValueFiles:
    - staging-values.yaml

dashboard:
  enabled: true
  targetRevision: staging-merge
  extraValueFiles:
    - staging-values.yaml

vcluster:
  sync:
    fromHost:
      secrets:
        enabled: true
        mappings:
          byName:
            "/letsencrypt-argo-workflows-workflows-diamond-ac-uk": "workflows/workflows-tls-cert"
            "/letsencrypt-argo-cd-workflows-diamond-ac-uk": "argocd/argo-cd-tls-cert"
            "/letsencrypt-otelcollector-workflows-diamond-ac-uk": "monitoring/otelcollector-tls-cert"
            "/argocd-oauth": "argocd/argocd-oauth"
            "/argo-server-sso": "workflows/argo-server-sso"
            "/sessionspaces-ispyb": "kube-system/sessionspaces-ispyb"
            "/artifact-s3-secret": "graph-proxy/artifact-s3-secret"